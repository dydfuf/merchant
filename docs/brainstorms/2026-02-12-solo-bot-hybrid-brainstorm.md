---
date: 2026-02-12
topic: solo-bot-hybrid
---

# Solo Bot Hybrid Brainstorm

## What We're Building
멀티플레이 전제 스플렌더에 싱글 플레이 경험을 추가한다. 형태는 "1인 + 봇(1~3명)"이며, 서버 권위 아키텍처를 유지한다. 봇도 사람과 동일하게 Command만 제출하고, 서버가 룰 판정/이벤트 생성을 담당한다.

봇 의사결정은 하이브리드로 설계한다. 기본은 규칙 기반 봇을 사용하고, 사용자가 명시적으로 활성화한 경우에만 LLM 선택기를 사용한다. LLM은 자유 행동 생성이 아닌 "서버가 만든 합법 후보 액션 중 선택"만 수행한다.

## Why This Approach
대안 비교 결과, 규칙 기반 단독은 안정적이지만 단조롭고, LLM 단독은 운영 리스크가 높다. 하이브리드는 재미(다양한 스타일)와 안정성(룰 안전성, 폴백)을 동시에 확보한다.

특히 현재 코드베이스는 룰/서버 경계가 명확하고 서버/룰엔진 실행부가 아직 초기 단계라, BotDecisionPolicy를 이 시점에 넣으면 구조 부채를 줄일 수 있다.

## Key Decisions
- 봇 실행 모델: "1인 + 봇(1~3명)"으로 시작한다.
  - 이유: 현재 플레이어 수 모델이 2~4인 중심이므로 순수 1인보다 변경 영향이 작다.
- 의사결정 아키텍처: 하이브리드(규칙 기반 코어 + LLM 후보 선택기)로 간다.
  - 이유: 플레이 다양성과 운영 안정성 균형.
- LLM 기본값: OFF.
  - 이유: 비용/지연/오류/보안 리스크를 기본 사용자 경험에서 분리.
- LLM 활성화 방식: 사용자 opt-in + 멀티프로바이더 지원.
  - 이유: 벤더 종속 회피와 확장성 확보.
- 안전장치: 키 미설정/타임아웃/실패 시 규칙 기반 즉시 폴백.
  - 이유: 턴 정지 방지 및 게임 진행 보장.
- LLM 권한 범위: 합법 후보 선택만 허용, 자유 생성 금지.
  - 이유: 서버 권위 및 규칙 무결성 유지.

## Open Questions
- BYOK 저장 정책: 세션 메모리, 로컬 암호화 저장, OS 키체인 중 무엇을 MVP 기본으로 할지.
- 멀티프로바이더 최소 범위: OpenAI + Anthropic부터 시작할지, 추상화만 먼저 둘지.
- LLM 요청 비용 가드: 턴당 최대 토큰/최대 지연시간 기본값.
- UX 범위: 실험 기능 라벨, 책임 고지, 키 입력/삭제 플로우 상세.

## Next Steps
-> `/workflows:plan` 으로 구현 계획 수립

권장 구현 단계:
1. BotDecisionPolicy 인터페이스 + HeuristicPolicy 구현
2. 합법 후보 액션 생성기(룰엔진 기반) 추가
3. LlmRankingPolicy(멀티프로바이더 어댑터) 추가
4. LLM OFF 기본 UX + opt-in 토글 + BYOK 입력 플로우
5. 폴백/타임아웃/관측(응답시간, 폴백률, 오류율) 추가
